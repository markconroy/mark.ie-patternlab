{"version":3,"sources":["05-page-sections/header/header.js"],"names":["Drupal","behaviors","header","attach","context","getHeaderHeight","headerHeight","offsetHeight","headerOffCanvas","style","top","offsetTop","toggleOffCanvas","ev","expanded","target","getAttribute","setAttribute","dataset","menuHiddenLabel","textContent","menuExpandText","classList","remove","focus","add","menuExpandedLabel","menuHideText","hideShowOffCanvasWindowWidth","window","matchMedia","matches","menuToggleButton","display","keepFocusInMenu","lastFocusable","addEventListener","document","querySelector","contains","menuToggleLink","menu","menuID","focusable","querySelectorAll","length","removeAttribute","body","closest","drupalSettings"],"mappings":"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","sourcesContent":["/**\n * @file JS file for the header component.\n */\n\n(function headerScript(Drupal, drupalSettings) {\n  Drupal.behaviors.header = {\n    attach(context) {\n      context = context || document;\n\n      const menuToggleButton = document.querySelector('.header__menu-toggle .menu-toggle__button');\n      \n      // If we've already processed the content and added the event listeners,\n      // we don't need to continue.\n      if (menuToggleButton.classList.contains('js-menu-toggle-button')) {\n        return;\n      }\n\n      const menuToggleLink = document.querySelector('.header__menu-toggle .menu-toggle__link');\n      const headerOffCanvas = document.querySelector('.header__off-canvas');\n      const header = document.querySelector('header.header');\n      let headerHeight = header.offsetHeight;\n      const menu = header.querySelector('.header__off-canvas .menu--main');\n      const menuID = menu.getAttribute('id');\n\n      var focusable = headerOffCanvas.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n      var lastFocusable = focusable[focusable.length - 1];\n\n      // Show toggle button and hide anchor.\n      menuToggleButton.classList.add('js-menu-toggle-button');\n      menuToggleButton.removeAttribute('hidden');\n      menuToggleButton.setAttribute('aria-controls', menuID);\n      menuToggleLink.setAttribute('hidden', true);\n\n      // Set offset canvas below header\n      function getHeaderHeight() {\n        headerHeight = header.offsetHeight;\n        headerOffCanvas.style.top = headerHeight + header.offsetTop + 'px';\n      }\n      getHeaderHeight();\n\n      // When the \"Menu\" or \"Close\" buttons are clicked, this function is called.\n      // It just toggles some classes to bring the .header__off-canvas into/out of view.\n      function toggleOffCanvas(ev) {\n        const expanded = (ev.target.getAttribute('aria-expanded') === 'true');\n\n        // Hide the menu overlay.\n        if (expanded) {\n          // Handle button changes.\n          ev.target.setAttribute('aria-expanded', false);\n          ev.target.setAttribute('aria-label', ev.target.dataset.menuHiddenLabel);\n          ev.target.textContent = ev.target.dataset.menuExpandText;\n          ev.target.classList.remove('open');\n          ev.target.focus();\n\n          // Handle overlay changes.\n          headerOffCanvas.classList.remove(\"header__off-canvas--is-on-canvas\");\n          headerOffCanvas.classList.add(\"header__off-canvas--is-off-canvas\");\n        }\n        // Show the menu overlay.\n        else {\n          // Handle button changes.\n          ev.target.setAttribute('aria-expanded', true);\n          ev.target.setAttribute('aria-label', ev.target.dataset.menuExpandedLabel);\n          ev.target.textContent = ev.target.dataset.menuHideText;\n          ev.target.classList.add('open');\n\n          // Handle overlay changes.\n          headerOffCanvas.style.top = headerHeight + header.offsetTop + 'px';\n          headerOffCanvas.classList.remove(\"header__off-canvas--is-off-canvas\");\n          headerOffCanvas.classList.add(\"header__off-canvas--is-on-canvas\");\n        }\n      }\n\n      // This function is called when the window is resized. If we are on a large screen\n      // it just resets the .header__off-canvas, so we can see the desktop version of the menu.\n      function hideShowOffCanvasWindowWidth() {\n        if (window.matchMedia('(min-width: 1024px)').matches) {\n          headerOffCanvas.classList.remove(\"header__off-canvas--is-on-canvas\");\n          headerOffCanvas.classList.add(\"header__off-canvas--is-off-canvas\");\n          menuToggleButton.style.display = 'block';\n          menuToggleButton.setAttribute('aria-expanded', 'false');\n          menuToggleButton.classList.remove(\"open\");\n        }\n      }\n\n      function keepFocusInMenu() {\n        if ((window.matchMedia('(max-width: 1023px)').matches)) {\n          lastFocusable.addEventListener('keydown', function() {\n            menuToggleButton.focus();\n          });\n        }\n      }\n      keepFocusInMenu();\n\n      window.addEventListener(\"resize\", hideShowOffCanvasWindowWidth);\n      window.addEventListener(\"resize\", getHeaderHeight);\n      menuToggleButton.addEventListener(\"click\", toggleOffCanvas);\n\n      // Add class to body for styling hook\n      const body = menuToggleButton.closest(\"body\");\n      body.classList.add('js-header');\n\n    }\n  };\n}(Drupal, drupalSettings));\n"],"file":"header.js"}